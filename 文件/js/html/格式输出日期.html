<!doctype html>
<html>
 <head>
  <meta charset="GB2312">
  <script>
	function format(date){
		var arr=[];
		var week=["日","一","二","三","四","五","六"];
		//获取年
		arr.push(date.getFullYear());
		//获取月  要先修正+1；
		var M=date.getMonth()+1;
		arr.push(M<10?"0"+M:M);
		//获取日
		var d=date.getDate();
		arr.push(d<10?"0"+d:d);
		//获取星期
		arr.push(week[date.getDay()]);
		//判断是上午还是下午
		var h=date.getHours();
		arr.push(h<12?"上午":"下午");
		h>12&&(h-=12);
		//获取小时
		arr.push(h<10?"0"+h:h);
		//获取分钟
		var m=date.getMinutes();
		arr.push(m<10?"0"+m:m);
		var str=arr.join("");
		var reg=/(\d{4})(\d{2})(\d{2})([日一-六])([上下]午)(\d{2})(\d{2})/;
		return str.replace(reg,"$1年$2月$3日 星期$4 $5 $6:$7");
	}
  </script>
  <style type="text/css">
	
  </style>
  <title>Document</title>
 </head>
 <body>
	<input type="button" value="格式化输出" onclick="alert(format(new Date()))" />
 </body>
</html>
